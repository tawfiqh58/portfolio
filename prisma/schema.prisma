datasource db {
  provider = "postgresql"
  url = env("POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
  shadowDatabaseUrl = env("POSTGRES_URL_NON_POOLING") // used for migrations
}

generator client {
  provider = "prisma-client-js"
}

model Project {
  id          Int       @id @default(autoincrement())
  projectId   String    @unique
  mainImage   MainImage?
  slugId      Int       @unique
  slug        Slug      @relation(fields: [slugId], references: [id])
  categories  Category[]
  title       String
  body        String
  excerpt     String
  publishedAt DateTime
  createdAt   DateTime
}

model MainImage {
  id         Int     @id @default(autoincrement())
  src        String
  small      String
  alt        String
  projectId  String    @unique
  project    Project @relation(fields: [projectId], references: [projectId])
}

model Slug {
  id           Int      @id @default(autoincrement())
  current      String
  projectId    String
  project      Project?
  categories   Category[]
}

model Category {
  id           Int      @id @default(autoincrement())
  slug         Slug     @relation(fields: [slugId], references: [id])
  slugId       Int
  projectId    String
  project      Project  @relation(fields: [projectId], references: [projectId])
}
